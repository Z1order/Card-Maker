<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Card Maker</title>
  <style>
    :root {
      --bg: #0e0f14;
      --panel: #171a22;
      --text: #ffffff;
      --muted: #9aa3b2;
      --accent: #ffcc00;
      --focus: #7aa2ff;
    }

    * { box-sizing: border-box; }

    body {
      margin: 0;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji", "Segoe UI Emoji";
      background: radial-gradient(1200px 600px at 20% -10%, #1d2230, transparent),
                  radial-gradient(1000px 500px at 120% 0%, #1a1f2e, transparent),
                  var(--bg);
      color: var(--text);
      -webkit-font-smoothing: antialiased;
      -moz-osx-font-smoothing: grayscale;
      min-height: 100vh;
    }

    header {
      padding: 28px 20px 8px;
      text-align: center;
    }

    h1 {
      font-size: clamp(28px, 4vw, 40px);
      margin: 0 0 6px;
      letter-spacing: 0.3px;
      font-weight: 800;
      color: var(--text);
      text-shadow: 0 1px 0 rgba(255,255,255,0.05), 0 6px 40px rgba(0,0,0,0.6);
    }

    .subtitle {
      color: var(--muted);
      font-size: 14px;
    }

    .container {
      max-width: 1100px;
      margin: 24px auto 64px;
      padding: 0 16px;
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 22px;
    }

    @media (max-width: 900px) {
      .container { grid-template-columns: 1fr; }
    }

    /* Panels */
    .panel {
      background: linear-gradient(180deg, rgba(255,255,255,0.02), rgba(255,255,255,0.0));
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 18px;
      padding: 18px;
      box-shadow: 0 8px 30px rgba(0,0,0,0.35), inset 0 1px 0 rgba(255,255,255,0.04);
      backdrop-filter: blur(2px);
    }

    .panel h2 {
      margin: 6px 6px 12px;
      font-size: 18px;
      color: var(--text);
    }

    /* Form */
    form {
      display: grid;
      grid-template-columns: repeat(2, 1fr);
      gap: 12px;
    }

    @media (max-width: 600px) {
      form { grid-template-columns: 1fr; }
    }

    label {
      font-size: 12px;
      color: var(--muted);
      margin: 0 6px 6px;
      display: block;
    }

    .field {
      background: var(--panel);
      border: 1px solid rgba(255,255,255,0.08);
      border-radius: 12px;
      padding: 10px 12px;
      color: var(--text);
      width: 100%;
      outline: none;
      transition: border-color 0.2s, box-shadow 0.2s;
    }

    .field:focus {
      border-color: var(--focus);
      box-shadow: 0 0 0 3px rgba(122,162,255,0.18);
    }

    textarea.field { resize: vertical; min-height: 42px; }

    .row { display: flex; flex-direction: column; }
    .row.full { grid-column: 1 / -1; }

    .actions { grid-column: 1 / -1; display: flex; gap: 10px; flex-wrap: wrap; }

    .btn {
      appearance: none;
      border: none;
      border-radius: 12px;
      padding: 12px 16px;
      font-weight: 700;
      cursor: pointer;
      transition: transform 0.02s ease, box-shadow 0.2s ease, background 0.2s ease;
    }
    .btn:active { transform: translateY(1px); }

    .btn-primary {
      background: linear-gradient(180deg, #ffd84d, #ffb800);
      color: #121212;
      box-shadow: 0 10px 24px rgba(255,184,0,0.35);
    }
    .btn-primary:hover { filter: brightness(0.98); }

    .btn-secondary {
      background: linear-gradient(180deg, #2b2f3d, #1e2230);
      color: var(--text);
      border: 1px solid rgba(255,255,255,0.08);
    }

    /* Card preview */
    .card-wrap {
      display: grid;
      gap: 14px;
    }

    .card {
      border-radius: 22px;
      padding: clamp(18px, 4vw, 28px);
      min-height: 420px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      text-align: center;
      color: #ffffff;
      box-shadow: 0 20px 60px rgba(0,0,0,0.55), inset 0 1px 0 rgba(255,255,255,0.05);
      outline: 1px solid rgba(255,255,255,0.10);
    }

    .card h3 {
      margin: 0 0 8px;
      font-size: clamp(22px, 3vw, 30px);
      letter-spacing: 0.3px;
      text-transform: uppercase;
    }

    .to-line { opacity: 0.9; margin: 6px 0 14px; font-weight: 700; }

    .message { max-width: 50ch; line-height: 1.6; font-size: 1.06rem; }

    .details { margin-top: 12px; opacity: 0.9; font-size: 0.95rem; }

    .from-line { margin-top: 16px; font-style: italic; font-weight: 700; }

    .tools {
      display: flex; gap: 10px; flex-wrap: wrap; margin-top: 10px;
    }

    /* High-contrast themes for the card */
    .theme-red    { background: linear-gradient(135deg, #ff2d55 0%, #a8002a 100%); }
    .theme-blue   { background: linear-gradient(135deg, #0a84ff 0%, #003a75 100%); }
    .theme-green  { background: linear-gradient(135deg, #30d158 0%, #0b5d27 100%); }
    .theme-purple { background: linear-gradient(135deg, #bf5af2 0%, #4b1172 100%); }
    .theme-orange { background: linear-gradient(135deg, #ff9f0a 0%, #8a3b00 100%); }
    .theme-mono   { background: linear-gradient(135deg, #2b2f3a 0%, #12141a 100%); }

    .small-note { color: var(--muted); font-size: 12px; text-align: center; }
  </style>
</head>
<body>
  <header>
    <h1>Card Maker</h1>
    <div class="subtitle">High-contrast ‚Ä¢ No images ‚Ä¢ Auto message generator with tone</div>
  </header>

  <main class="container">
    <!-- Left: Form -->
    <section class="panel">
      <h2>Card Details</h2>
      <form id="cardForm" autocomplete="on">
        <div class="row">
          <label for="to">Recipient</label>
          <input id="to" class="field" type="text" placeholder="e.g., Alex" required />
        </div>

        <div class="row">
          <label for="from">From</label>
          <input id="from" class="field" type="text" placeholder="Your name" required />
        </div>

        <div class="row">
          <label for="occasion">Occasion</label>
          <select id="occasion" class="field">
            <option>Birthday</option>
            <option>Thank You</option>
            <option>Congratulations</option>
            <option>Get Well Soon</option>
          </select>
        </div>

        <div class="row">
          <label for="tone">Tone</label>
          <select id="tone" class="field">
            <option value="casual" selected>Casual (friendly)</option>
            <option value="sweet">Sweet (heartfelt)</option>
            <option value="funny">Light-Funny (less silly)</option>
            <option value="formal">Formal (polite)</option>
          </select>
        </div>

        <div class="row">
          <label for="theme">Theme</label>
          <select id="theme" class="field">
            <option value="red">Red</option>
            <option value="blue" selected>Blue</option>
            <option value="green">Green</option>
            <option value="purple">Purple</option>
            <option value="orange">Orange</option>
            <option value="mono">Mono</option>
          </select>
        </div>

        <div class="row">
          <label for="date">Date (optional)</label>
          <input id="date" class="field" type="date" />
        </div>

        <div class="row">
          <label for="location">Location (optional)</label>
          <input id="location" class="field" type="text" placeholder="e.g., At the park" />
        </div>

        <div class="row full">
          <label for="favThing">Favorite thing about them (optional)</label>
          <input id="favThing" class="field" type="text" placeholder="e.g., Your unstoppable optimism" />
        </div>

        <div class="row full">
          <label for="insideJoke">Inside joke or memory (optional)</label>
          <input id="insideJoke" class="field" type="text" placeholder="e.g., Remember the pancake disaster?" />
        </div>

        <div class="row full">
          <label for="extraNote">Extra note (optional)</label>
          <textarea id="extraNote" class="field" placeholder="Anything else you want woven into the message‚Ä¶"></textarea>
        </div>

        <div class="actions">
          <button type="button" class="btn btn-primary" id="makeBtn">Generate Card</button>
          <button type="reset" class="btn btn-secondary" id="resetBtn">Reset</button>
        </div>
      </form>
      <p class="small-note">Tip: You only need Recipient, From, Occasion, and Tone ‚Äî the rest is optional.</p>
    </section>

    <!-- Right: Preview -->
    <section class="panel card-wrap">
      <h2>Preview</h2>
      <div id="card" class="card theme-blue" aria-live="polite">
        <h3 id="cardOccasion">Your Card</h3>
        <div class="to-line"><span id="cardTo">To: ‚Äî</span></div>
        <div class="message" id="cardMessage">Fill in a few details and click ‚ÄúGenerate Card‚Äù. Your personalized message will appear here.</div>
        <div class="details" id="cardDetails"></div>
        <div class="from-line" id="cardFrom">‚Äî</div>
      </div>

      <div class="tools">
        <button class="btn btn-primary" id="downloadBtn" title="Download PNG">Download</button>
        <button class="btn btn-secondary" id="printBtn" title="Print">Print</button>
      </div>
    </section>
  </main>

  <!-- html2canvas for PNG export -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js" integrity="sha512-BNaRQnYH9V2QmXwjg1kP2dQfK6z3m8x4o7nq1n0mzybQeQW9aG8i9mkh3o2lV5b6uJr9f7jEo0k6V5xg6i3A9w==" crossorigin="anonymous" referrerpolicy="no-referrer"></script>

  <script>
    // Utilities
    function el(id) { return document.getElementById(id); }

    function setTheme(theme) {
      const card = el('card');
      card.className = 'card theme-' + theme;
    }

    function buildDetails(date, location) {
      const parts = [];
      if (date) parts.push('üìÖ ' + date);
      if (location) parts.push('üìç ' + location);
      return parts.join('  ¬∑  ');
    }

    // Message templates per occasion + tone
    function generateMessage({ occasion, tone, to, favThing, insideJoke, extraNote }) {
      const name = to || 'you';

      const addOns = [];
      if (favThing) addOns.push(`One thing I really appreciate about you: ${favThing}.`);
      if (insideJoke) addOns.push(`And yes, I still laugh about this: ${insideJoke}.`);
      if (extraNote) addOns.push(extraNote);

      const extra = addOns.length ? '\n\n' + addOns.join(' ') : '';

      const blocks = {
        Birthday: {
          casual: `Happy Birthday, ${name}! Today is all about celebrating you ‚Äî your humor, your heart, and the energy you bring to every room. I hope your day is packed with great food, solid company, and a few surprises that make you grin. May this year open new doors and give you stories worth retelling. You deserve a day that feels easy and joyful.` + extra,
          sweet: `Happy Birthday, ${name}! Wishing you a day wrapped in love and a year filled with little moments that turn into big memories. Your kindness and spark make life brighter for the people around you. May the next chapter bring you peace, growth, and so many reasons to smile. You are deeply appreciated ‚Äî today and always.` + extra,
          funny: `Happy Birthday, ${name}! Congratulations on leveling up in life ‚Äî may your snacks be endless and your responsibilities mysteriously shrink for 24 hours. I hope your cake is bigger than your to‚Äëdo list and that you get at least one gift that isn‚Äôt socks. New year, same legend (with possibly better snacks).` + extra,
          formal: `Happy Birthday, ${name}. Wishing you a wonderful day and a successful year ahead. May your efforts be rewarded and your goals achieved with grace and determination. Thank you for all that you contribute ‚Äî it does not go unnoticed.` + extra,
        },
        'Thank You': {
          casual: `Thank you, ${name}! Your support means more than I can put into a quick message. You always show up with steady encouragement and a calm ‚Äúwe‚Äôve got this‚Äù energy. I‚Äôm really grateful for you and the way you make tough days feel lighter. Just wanted you to know it matters ‚Äî a lot.` + extra,
          sweet: `Dear ${name}, thank you so much for your generosity and care. The way you give your time and attention is a gift all on its own. Your presence makes hard things softer and good things better. I‚Äôm sincerely grateful for you.` + extra,
          funny: `Huge thanks, ${name}! If gratitude were snacks, you‚Äôd need a bigger pantry. Seriously though, you saved the day ‚Äî and probably my sanity. Consider this message a high‚Äëfive you can read.` + extra,
          formal: `Dear ${name}, thank you for your assistance and thoughtful support. Your reliability and follow‚Äëthrough made a significant difference, and I am truly appreciative. Please accept my sincere thanks.` + extra,
        },
        Congratulations: {
          casual: `Big congrats, ${name}! You did the work, stayed consistent, and now you get the win. Take a second to soak it in ‚Äî this is what momentum feels like. I‚Äôm proud of you and excited to see what this opens up next. Keep going.` + extra,
          sweet: `Congratulations, ${name}! Your dedication and heart brought you here, and it‚Äôs so well deserved. May this milestone be the start of something even more meaningful. Celebrating you and all the good that‚Äôs ahead.` + extra,
          funny: `Congrats, ${name}! Look at you, casually crushing goals like it‚Äôs a hobby. Please remember us when you‚Äôre famous. For now, enjoy the sweet victory ‚Äî you earned every bit.` + extra,
          formal: `Congratulations, ${name}. This achievement reflects your skill, discipline, and professionalism. May it be the first of many milestones in your continued success.` + extra,
        },
        'Get Well Soon': {
          casual: `Hey ${name}, sending you a little boost for the road back to feeling like yourself. Rest up, take it slow, and let the people who care about you show up for you. We miss your energy ‚Äî can‚Äôt wait to see you back.` + extra,
          sweet: `Dear ${name}, thinking of you and wishing you gentle days and quick healing. May you feel supported, rested, and surrounded by care. You are stronger than you know, and better days are on their way.` + extra,
          funny: `Get well soon, ${name}! Permission granted to nap aggressively and boss the blankets around. We need you back ‚Äî mostly because you make everything more fun (and also because we‚Äôre running out of jokes without you).` + extra,
          formal: `Dear ${name}, wishing you a smooth and steady recovery. Please take the time you need to rest and heal. Looking forward to your return in good health.` + extra,
        },
      };

      return blocks[occasion][tone];
    }

    // Wire up UI
    const form = el('cardForm');
    const makeBtn = el('makeBtn');
    const downloadBtn = el('downloadBtn');
    const printBtn = el('printBtn');

    makeBtn.addEventListener('click', () => {
      const to = el('to').value.trim();
      const from = el('from').value.trim();
      const occasion = el('occasion').value;
      const tone = el('tone').value;
      const theme = el('theme').value;
      const date = el('date').value;
      const location = el('location').value.trim();
      const favThing = el('favThing').value.trim();
      const insideJoke = el('insideJoke').value.trim();
      const extraNote = el('extraNote').value.trim();

      if (!to || !from) {
        alert('Please fill in Recipient and From.');
        return;
      }

      // Update visual theme and headings
      setTheme(theme);
      el('cardOccasion').textContent = occasion + ' Card';
      el('cardTo').textContent = 'To: ' + to;

      // Message
      const message = generateMessage({ occasion, tone, to, favThing, insideJoke, extraNote });
      el('cardMessage').textContent = message;

      // Details line
      el('cardDetails').textContent = buildDetails(date, location);

      // From line
      el('cardFrom').textContent = '‚Äî From, ' + from;
    });

    downloadBtn.addEventListener('click', async () => {
      const node = el('card');
      const canvas = await html2canvas(node, { scale: 2, backgroundColor: null });
      const link = document.createElement('a');
      link.download = 'card.png';
      link.href = canvas.toDataURL('image/png');
      link.click();
    });

    printBtn.addEventListener('click', async () => {
      const node = el('card');
      const canvas = await html2canvas(node, { scale: 2, backgroundColor: null });
      const dataUrl = canvas.toDataURL('image/png');

      const w = window.open('', 'PRINT', 'height=700,width=900');
      if (!w) return;
      w.document.write('<html><head><title>Print Card</title></head><body style="margin:0;">');
      w.document.write('<img src="' + dataUrl + '" style="width:100%;max-width:900px;display:block;margin:0 auto;" />');
      w.document.write('</body></html>');
      w.document.close();
      w.focus();
      w.print();
    });
  </script>
</body>
</html>
